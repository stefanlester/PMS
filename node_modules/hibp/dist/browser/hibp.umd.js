!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).hibp={})}(this,(function(t){"use strict";function e(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var n=e(Object.freeze({__proto__:null,default:function(t,e){return e=e||{},new Promise((function(n,r){var o=new XMLHttpRequest,s=[],i=[],u={},a=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:a,headers:{keys:function(){return s},entries:function(){return i},get:function(t){return u[t.toLowerCase()]},has:function(t){return t.toLowerCase()in u}}}};for(var c in o.open(e.method||"get",t,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){s.push(e=e.toLowerCase()),i.push([e,n]),u[e]=u[e]?u[e]+","+n:n})),n(a())},o.onerror=r,o.withCredentials="include"==e.credentials,e.headers)o.setRequestHeader(c,e.headers[c]);o.send(e.body||null)}))}})),r=self.fetch||(self.fetch=n.default||n);var o=400,s="Bad request â€” the account does not comply with an acceptable format.",i=401,u=403,a="Forbidden - access denied.",c=404,h=429;function f(t){return"Request blocked, contact haveibeenpwned.com if this continues (Ray ID: ".concat(t,")")}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.apiKey,l=e.baseUrl,p=void 0===l?"https://haveibeenpwned.com/api/v3":l,d=e.userAgent,g={};n&&(g["HIBP-API-Key"]=n),d&&(g["User-Agent"]=d),d||"undefined"!=typeof navigator||(g["User-Agent"]="".concat("hibp"," ").concat("10.0.0"));var v={headers:g},A="".concat(p.replace(/\/$/g,"")).concat(t);return r(A,v).then((function(t){if(t.ok)return t.json();switch(t.status){case o:throw Error(s);case i:return t.json().then((function(t){throw Error(t.message)}));case u:var e=t.headers.get("cf-ray");if(e)throw Error(f(e));throw Error(a);case c:return null;case h:return t.json().then((function(t){throw Error(t.message)}));default:throw Error(t.statusText)}}))}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeUnverified:!0,truncate:!0},n="/breachedaccount/".concat(encodeURIComponent(t),"?"),r=[];return e.domain&&r.push("domain=".concat(encodeURIComponent(e.domain))),!1===e.includeUnverified&&r.push("includeUnverified=false"),!1===e.truncate&&r.push("truncateResponse=false"),l("".concat(n).concat(r.join("&")),{apiKey:e.apiKey,baseUrl:e.baseUrl,userAgent:e.userAgent})}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l("/pasteaccount/".concat(encodeURIComponent(t)),{apiKey:e.apiKey,baseUrl:e.baseUrl,userAgent:e.userAgent})}const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function v(t,e,n,r){let o,s,i;const u=e||[0],a=(n=n||0)>>>3,c=-1===r?3:0;for(o=0;t.length>o;o+=1)i=o+a,s=i>>>2,s>=u.length&&u.push(0),u[s]|=t[o]<<8*(c+r*(i%4));return{value:u,binLen:8*t.length+n}}function A(t,e,n){switch(e){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(t){case"HEX":return function(t,e,r){return function(t,e,n,r){let o,s,i,u;if(0!=t.length%2)throw Error("String of HEX type must be in byte increments");const a=e||[0],c=(n=n||0)>>>3,h=-1===r?3:0;for(o=0;t.length>o;o+=2){if(s=parseInt(t.substr(o,2),16),isNaN(s))throw Error("String of HEX type contains invalid characters");for(u=(o>>>1)+c,i=u>>>2;i>=a.length;)a.push(0);a[i]|=s<<8*(h+r*(u%4))}return{value:a,binLen:4*t.length+n}}(t,e,r,n)};case"TEXT":return function(t,r,o){return function(t,e,n,r,o){let s,i,u,a,c,h,f,l,p=0;const d=n||[0],g=(r=r||0)>>>3;if("UTF8"===e)for(f=-1===o?3:0,u=0;t.length>u;u+=1)for(s=t.charCodeAt(u),i=[],128>s?i.push(s):2048>s?(i.push(192|s>>>6),i.push(128|63&s)):55296>s||s>=57344?i.push(224|s>>>12,128|s>>>6&63,128|63&s):(u+=1,s=65536+((1023&s)<<10|1023&t.charCodeAt(u)),i.push(240|s>>>18,128|s>>>12&63,128|s>>>6&63,128|63&s)),a=0;i.length>a;a+=1){for(h=p+g,c=h>>>2;c>=d.length;)d.push(0);d[c]|=i[a]<<8*(f+o*(h%4)),p+=1}else for(f=-1===o?2:0,l="UTF16LE"===e&&1!==o||"UTF16LE"!==e&&1===o,u=0;t.length>u;u+=1){for(s=t.charCodeAt(u),!0===l&&(a=255&s,s=a<<8|s>>>8),h=p+g,c=h>>>2;c>=d.length;)d.push(0);d[c]|=s<<8*(f+o*(h%4)),p+=2}return{value:d,binLen:8*p+r}}(t,e,r,o,n)};case"B64":return function(t,e,r){return function(t,e,n,r){let o,s,i,u,a,c,h,f=0;const l=e||[0],p=(n=n||0)>>>3,d=-1===r?3:0,v=t.indexOf("=");if(-1===t.search(/^[a-zA-Z0-9=+/]+$/))throw Error("Invalid character in base-64 string");if(t=t.replace(/=/g,""),-1!==v&&t.length>v)throw Error("Invalid '=' found in base-64 string");for(s=0;t.length>s;s+=4){for(a=t.substr(s,4),u=0,i=0;a.length>i;i+=1)o=g.indexOf(a.charAt(i)),u|=o<<18-6*i;for(i=0;a.length-1>i;i+=1){for(h=f+p,c=h>>>2;c>=l.length;)l.push(0);l[c]|=(u>>>16-8*i&255)<<8*(d+r*(h%4)),f+=1}}return{value:l,binLen:8*f+n}}(t,e,r,n)};case"BYTES":return function(t,e,r){return function(t,e,n,r){let o,s,i,u;const a=e||[0],c=(n=n||0)>>>3,h=-1===r?3:0;for(s=0;t.length>s;s+=1)o=t.charCodeAt(s),u=s+c,i=u>>>2,i>=a.length&&a.push(0),a[i]|=o<<8*(h+r*(u%4));return{value:a,binLen:8*t.length+n}}(t,e,r,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw Error("ARRAYBUFFER not supported by this environment")}return function(t,e,r){return function(t,e,n,r){return v(new Uint8Array(t),e,n,r)}(t,e,r,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw Error("UINT8ARRAY not supported by this environment")}return function(t,e,r){return v(t,e,r,n)};default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function b(t,e,n,r){switch(t){case"HEX":return function(t){return function(t,e,n,r){let o,s,i="";const u=e/8,a=-1===n?3:0;for(o=0;u>o;o+=1)s=t[o>>>2]>>>8*(a+n*(o%4)),i+="0123456789abcdef".charAt(s>>>4&15)+"0123456789abcdef".charAt(15&s);return r.outputUpper?i.toUpperCase():i}(t,e,n,r)};case"B64":return function(t){return function(t,e,n,r){let o,s,i,u,a,c="";const h=e/8,f=-1===n?3:0;for(o=0;h>o;o+=3)for(u=h>o+1?t[o+1>>>2]:0,a=h>o+2?t[o+2>>>2]:0,i=(t[o>>>2]>>>8*(f+n*(o%4))&255)<<16|(u>>>8*(f+n*((o+1)%4))&255)<<8|a>>>8*(f+n*((o+2)%4))&255,s=0;4>s;s+=1)c+=8*o+6*s>e?r.b64Pad:g.charAt(i>>>6*(3-s)&63);return c}(t,e,n,r)};case"BYTES":return function(t){return function(t,e,n){let r,o,s="";const i=e/8,u=-1===n?3:0;for(r=0;i>r;r+=1)o=t[r>>>2]>>>8*(u+n*(r%4))&255,s+=String.fromCharCode(o);return s}(t,e,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw Error("ARRAYBUFFER not supported by this environment")}return function(t){return function(t,e,n){let r;const o=e/8,s=new ArrayBuffer(o),i=new Uint8Array(s),u=-1===n?3:0;for(r=0;o>r;r+=1)i[r]=t[r>>>2]>>>8*(u+n*(r%4))&255;return s}(t,e,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw Error("UINT8ARRAY not supported by this environment")}return function(t){return function(t,e,n){let r;const o=e/8,s=-1===n?3:0,i=new Uint8Array(o);for(r=0;o>r;r+=1)i[r]=t[r>>>2]>>>8*(s+n*(r%4))&255;return i}(t,e,n)};default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function m(t){const e={outputUpper:!1,b64Pad:"=",outputLen:-1},n=t||{},r="Output length must be a multiple of 8";if(e.outputUpper=n.outputUpper||!1,n.b64Pad&&(e.b64Pad=n.b64Pad),n.outputLen){if(n.outputLen%8!=0)throw Error(r);e.outputLen=n.outputLen}else if(n.shakeLen){if(n.shakeLen%8!=0)throw Error(r);e.outputLen=n.shakeLen}if("boolean"!=typeof e.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof e.b64Pad)throw Error("Invalid b64Pad formatting option");return e}function U(t,e){return t<<e|t>>>32-e}function w(t,e,n){return t^e^n}function E(t,e,n){return t&e^t&n^e&n}function R(t,e){const n=(65535&t)+(65535&e);return(65535&(t>>>16)+(e>>>16)+(n>>>16))<<16|65535&n}function y(t,e,n,r,o){const s=(65535&t)+(65535&e)+(65535&n)+(65535&r)+(65535&o);return(65535&(t>>>16)+(e>>>16)+(n>>>16)+(r>>>16)+(o>>>16)+(s>>>16))<<16|65535&s}function T(t){return[1732584193,4023233417,2562383102,271733878,3285377520]}function C(t,e){let n,r,o,s,i,u,a;const c=[];for(n=e[0],r=e[1],o=e[2],s=e[3],i=e[4],a=0;80>a;a+=1)c[a]=16>a?t[a]:U(c[a-3]^c[a-8]^c[a-14]^c[a-16],1),u=20>a?y(U(n,5),(h=r)&o^~h&s,i,1518500249,c[a]):40>a?y(U(n,5),w(r,o,s),i,1859775393,c[a]):60>a?y(U(n,5),E(r,o,s),i,2400959708,c[a]):y(U(n,5),w(r,o,s),i,3395469782,c[a]),i=s,s=o,o=U(r,30),r=n,n=u;var h;return e[0]=R(n,e[0]),e[1]=R(r,e[1]),e[2]=R(o,e[2]),e[3]=R(s,e[3]),e[4]=R(i,e[4]),e}function F(t,e,n,r){let o;const s=15+(e+65>>>9<<4),i=e+n;for(;s>=t.length;)t.push(0);for(t[e>>>5]|=128<<24-e%32,t[s]=4294967295&i,t[s-1]=i/4294967296|0,o=0;t.length>o;o+=16)r=C(t.slice(o,o+16),r);return r}class L extends class{constructor(t,e,n){const r=n||{};if(this.t=e,this.i=r.encoding||"UTF8",this.numRounds=r.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw Error("numRounds must a integer >= 1");this.s=t,this.o=[],this.h=0,this.u=!1,this.l=0,this.A=!1,this.p=[],this.R=[]}update(t){let e,n=0;const r=this.U>>>5,o=this.T(t,this.o,this.h),s=o.binLen,i=o.value,u=s>>>5;for(e=0;u>e;e+=r)s>=n+this.U&&(this.F=this.m(i.slice(e,e+r),this.F),n+=this.U);this.l+=n,this.o=i.slice(n>>>5),this.h=s%this.U,this.u=!0}getHash(t,e){let n,r,o=this.g;const s=m(e);if(this.B){if(-1===s.outputLen)throw Error("Output length must be specified in options");o=s.outputLen}const i=b(t,o,this.v,s);if(this.A&&this.Y)return i(this.Y(s));for(r=this.H(this.o.slice(),this.h,this.l,this.C(this.F),o),n=1;this.numRounds>n;n+=1)this.B&&o%32!=0&&(r[r.length-1]&=16777215>>>24-o%32),r=this.H(r,o,0,this.I(this.s),o);return i(r)}setHMACKey(t,e,n){if(!this.L)throw Error("Variant does not support HMAC");if(this.u)throw Error("Cannot set MAC key after calling update");const r=A(e,(n||{}).encoding||"UTF8",this.v);this.M(r(t))}M(t){const e=this.U>>>3,n=e/4-1;let r;if(1!==this.numRounds)throw Error("Cannot set numRounds with MAC");if(this.A)throw Error("MAC key already set");for(t.binLen/8>e&&(t.value=this.H(t.value,t.binLen,0,this.I(this.s),this.g));n>=t.value.length;)t.value.push(0);for(r=0;n>=r;r+=1)this.p[r]=909522486^t.value[r],this.R[r]=1549556828^t.value[r];this.F=this.m(this.p,this.F),this.l=this.U,this.A=!0}getHMAC(t,e){const n=m(e);return b(t,this.g,this.v,n)(this.N())}N(){let t;if(!this.A)throw Error("Cannot call getHMAC without first setting MAC key");const e=this.H(this.o.slice(),this.h,this.l,this.C(this.F),this.g);return t=this.m(this.R,this.I(this.s)),t=this.H(e,this.g,this.U,t,this.g),t}}{constructor(t,e,n){if("SHA-1"!==t)throw Error("Chosen SHA variant is not supported");super(t,e,n);const r=n||{};this.L=!0,this.Y=this.N,this.v=-1,this.T=A(this.t,this.i,this.v),this.m=C,this.C=function(t){return t.slice()},this.I=T,this.H=F,this.F=[1732584193,4023233417,2562383102,271733878,3285377520],this.U=512,this.g=160,this.B=!1,r.hmacKey&&this.M(function(t,e,n,r){const o="hmacKey must include a value and format";if(!e)throw Error(o);if(void 0===e.value||!e.format)throw Error(o);return A(e.format,e.encoding||"UTF8",n)(e.value)}(0,r.hmacKey,this.v))}}var H=400;function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.baseUrl,o=void 0===n?"https://api.pwnedpasswords.com":n,s=e.userAgent,i=Object.assign({},s?{headers:{"User-Agent":s}}:{}),u="".concat(o.replace(/\/$/g,"")).concat(t);return r(u,i).then((function(t){if(t.ok)return t.text();if(t.status===H)return t.text().then((function(t){throw Error(t)}));throw Error(t.statusText)}))}function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I("/range/".concat(encodeURIComponent(t)),e).then((function(t){return t.split("\n")})).then((function(t){return t.map((function(t){return{suffix:t.split(":")[0],count:parseInt(t.split(":")[1],10)}}))}))}t.breach=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l("/breach/".concat(encodeURIComponent(t)),e)},t.breachedAccount=p,t.breaches=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="/breaches?",n=[];return t.domain&&n.push("domain=".concat(encodeURIComponent(t.domain))),l("".concat(e).concat(n.join("&")),{baseUrl:t.baseUrl,userAgent:t.userAgent})},t.dataClasses=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l("/dataclasses",t)},t.pasteAccount=d,t.pwnedPassword=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new L("SHA-1","TEXT");n.update(t);var r=n.getHash("HEX",{outputUpper:!0}),o=r.slice(0,5),s=r.slice(5);return B(o,e).then((function(t){return t.filter((function(t){return t.suffix===s}))})).then((function(t){return t[0]?t[0].count:0}))},t.pwnedPasswordRange=B,t.search=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{truncate:!0},n=e.apiKey,r=e.baseUrl,o=e.userAgent;return Promise.all([p(t,e),/^.+@.+$/.test(t)?d(t,{apiKey:n,baseUrl:r,userAgent:o}):null]).then((function(t){return{breaches:t[0],pastes:t[1]}}))},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=hibp.umd.js.map
